(()=>{var e={};e.id=52,e.ids=[52],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},13527:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>f,pages:()=>l,routeModule:()=>b,tree:()=>d}),r(98e3),r(32029),r(7629),r(53189),r(12523);var s=r(23191),a=r(88716),n=r(37922),i=r.n(n),c=r(95231),o={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>c[e]);r.d(t,o);let d=["",{children:["(web)",{children:["(user)",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,98e3)),"C:\\Users\\RYUNGOM\\Documents\\git_local\\GENISISU\\src\\app\\(web)\\(user)\\login\\page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,32029)),"C:\\Users\\RYUNGOM\\Documents\\git_local\\GENISISU\\src\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"C:\\Users\\RYUNGOM\\Documents\\git_local\\GENISISU\\src\\app\\error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,53189)),"C:\\Users\\RYUNGOM\\Documents\\git_local\\GENISISU\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"C:\\Users\\RYUNGOM\\Documents\\git_local\\GENISISU\\src\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["C:\\Users\\RYUNGOM\\Documents\\git_local\\GENISISU\\src\\app\\(web)\\(user)\\login\\page.tsx"],f="/(web)/(user)/login/page",u={require:r,loadChunk:()=>Promise.resolve()},b=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(web)/(user)/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},67276:(e,t,r)=>{let s={"16d2bc6b5eced6961bf8db2bc1d67ede835e8f9d":()=>Promise.resolve().then(r.bind(r,30507)).then(e=>e.login),"306b7454d444850388b0b337696bf2510e964603":()=>Promise.resolve().then(r.bind(r,30507)).then(e=>e.loginOAuth),"5c44382dbe96394bcad8fe4b0f12b83f462d1e68":()=>Promise.resolve().then(r.bind(r,30507)).then(e=>e.signup),"63123677dbadd7e687f735627efb79a41c8f7191":()=>Promise.resolve().then(r.bind(r,30507)).then(e=>e.signInWithGithub),"7df7509f7707302aaf9117bcd8701335afe68ff3":()=>Promise.resolve().then(r.bind(r,30507)).then(e=>e.signInWithNaver),"9297a7c3c0a4c31a957e07bc1b2e216c94cd2f42":()=>Promise.resolve().then(r.bind(r,30507)).then(e=>e.signInWithGenesis),c0cb573e3032ccc05d1a3b82a51300969d69f854:()=>Promise.resolve().then(r.bind(r,30507)).then(e=>e.signupWithOAuth),ca7d82acada03f15ffd04c3924204fbe18c8971d:()=>Promise.resolve().then(r.bind(r,30507)).then(e=>e.signInWithCredentials),da3b8ea7950fbfe472d7320d9f1873de15c51e56:()=>Promise.resolve().then(r.bind(r,30507)).then(e=>e.signInWithGoogle),b528dacb544d7652e5a942fe0e3cf294479c5318:()=>Promise.resolve().then(r.bind(r,1890)).then(e=>e.callGenesisLogin)};async function a(e,...t){return(await s[e]()).apply(null,t)}e.exports={"16d2bc6b5eced6961bf8db2bc1d67ede835e8f9d":a.bind(null,"16d2bc6b5eced6961bf8db2bc1d67ede835e8f9d"),"306b7454d444850388b0b337696bf2510e964603":a.bind(null,"306b7454d444850388b0b337696bf2510e964603"),"5c44382dbe96394bcad8fe4b0f12b83f462d1e68":a.bind(null,"5c44382dbe96394bcad8fe4b0f12b83f462d1e68"),"63123677dbadd7e687f735627efb79a41c8f7191":a.bind(null,"63123677dbadd7e687f735627efb79a41c8f7191"),"7df7509f7707302aaf9117bcd8701335afe68ff3":a.bind(null,"7df7509f7707302aaf9117bcd8701335afe68ff3"),"9297a7c3c0a4c31a957e07bc1b2e216c94cd2f42":a.bind(null,"9297a7c3c0a4c31a957e07bc1b2e216c94cd2f42"),c0cb573e3032ccc05d1a3b82a51300969d69f854:a.bind(null,"c0cb573e3032ccc05d1a3b82a51300969d69f854"),ca7d82acada03f15ffd04c3924204fbe18c8971d:a.bind(null,"ca7d82acada03f15ffd04c3924204fbe18c8971d"),da3b8ea7950fbfe472d7320d9f1873de15c51e56:a.bind(null,"da3b8ea7950fbfe472d7320d9f1873de15c51e56"),b528dacb544d7652e5a942fe0e3cf294479c5318:a.bind(null,"b528dacb544d7652e5a942fe0e3cf294479c5318")}},99948:(e,t,r)=>{Promise.resolve().then(r.bind(r,73470))},73470:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var s=r(10326),a=r(90170),n=r(78103),i=r(47679);r(15424),(0,r(46242).$)("b528dacb544d7652e5a942fe0e3cf294479c5318");var c=r(90434),o=r(74723);function d(){let{register:e,handleSubmit:t,formState:{errors:r,isLoading:d,isSubmitted:l},setError:f}=(0,o.cI)({defaultValues:{email:"hyundai-morgans@genisisu.com",password:"11111111"}}),u=async e=>{let t=await (0,i.c4)(e);t?!t.ok&&("errors"in t?t.errors.forEach(e=>f(e.path,{message:e.msg})):t.message&&alert(t.message)):alert("로그인 되었습니다.")};return(0,s.jsxs)("form",{children:[(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-2",htmlFor:"email",children:"이메일"}),s.jsx("input",{id:"email",type:"email",placeholder:"이메일을 입력하세요",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-orange-400 dark:bg-gray-700",...e("email",{required:"이메일을 입력하세요.",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"이메일 형식이 아닙니다."}})}),s.jsx(a.Z,{target:r.email})]}),(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-2",htmlFor:"password",children:"비밀번호"}),s.jsx("input",{id:"password",type:"password",placeholder:"비밀번호를 입력하세요",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-orange-400 dark:bg-gray-700",...e("password",{required:"비밀번호를 입력하세요."})}),s.jsx(a.Z,{target:r.password}),s.jsx(c.default,{href:"#",className:"block mt-6 ml-auto text-gray-500 text-sm dark:text-gray-300 hover:underline",children:"비밀번호를 잊으셨나요?"})]}),(0,s.jsxs)("div",{className:"flex gap-x-[10px] mt-10 mb-5 justify-center items-center",children:[s.jsx(n.Z,{className:"btnBasic px-[5%] py-[1%] hover:underline cursor:pointer",onClick:t(u),children:"로그인"}),s.jsx(c.default,{href:"/signup",className:"btnBasic px-[5%] py-[1%] hover:underline",children:"회원가입"})]}),(0,s.jsxs)("div",{className:"flex gap-x-[10px] justify-center items-center",children:[s.jsx(n.Z,{className:"btnBasic px-[5%] py-[1%] hover:underline cursor:pointer",formAction:i.qj,children:"구글"}),s.jsx(n.Z,{className:"btnBasic px-[5%] py-[1%] hover:underline cursor:pointer",formAction:i.gU,children:"깃허브"})]})]})}r(17577)},48648:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(10326);let a=({children:e,type:t="button",bgColor:r="black",size:a="md",color:n="white",...i})=>s.jsx("button",{type:t,className:`${{gray:"bg-gray-900",black:"bg-black",red:"bg-red-500",white:"bg-white"}[r]} ${{sm:"py-1 px-2 text-sm",md:"py-1 px-4 text-base",lg:"py-2 px-6 text-lg",medium:"w-14 h-8 text-sm font-light",custom:"w-[200px] h-[37px]"}[a]} ${{black:"text-black",white:"text-white",gray:"text-[#666666]"}[n]}`,style:{fontFamily:"Pretendard"},...i,children:e})},90170:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(10326);function a({target:e}){return e?s.jsx("p",{className:"ml-2 mt-1 text-sm text-red-500 dark:text-red-400",children:e.message}):null}},78103:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(10326),a=r(48648);let n=({children:e,...t})=>s.jsx(a.Z,{type:"submit",...t,children:e})},47679:(e,t,r)=>{"use strict";r.d(t,{IU:()=>n,c4:()=>i,gU:()=>a,qj:()=>c}),r(15424);var s=r(46242),a=(0,s.$)("63123677dbadd7e687f735627efb79a41c8f7191"),n=(0,s.$)("5c44382dbe96394bcad8fe4b0f12b83f462d1e68"),i=(0,s.$)("ca7d82acada03f15ffd04c3924204fbe18c8971d");(0,s.$)("16d2bc6b5eced6961bf8db2bc1d67ede835e8f9d"),(0,s.$)("c0cb573e3032ccc05d1a3b82a51300969d69f854"),(0,s.$)("306b7454d444850388b0b337696bf2510e964603");var c=(0,s.$)("da3b8ea7950fbfe472d7320d9f1873de15c51e56");(0,s.$)("9297a7c3c0a4c31a957e07bc1b2e216c94cd2f42"),(0,s.$)("7df7509f7707302aaf9117bcd8701335afe68ff3")},98e3:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,generateMetadata:()=>d});var s=r(19510),a=r(68570);let n=(0,a.createProxy)(String.raw`C:\Users\RYUNGOM\Documents\git_local\GENISISU\src\app\(web)\(user)\login\LoginForm.tsx`),{__esModule:i,$$typeof:c}=n;n.default;let o=(0,a.createProxy)(String.raw`C:\Users\RYUNGOM\Documents\git_local\GENISISU\src\app\(web)\(user)\login\LoginForm.tsx#default`);function d(){return{title:"로그인 - GENISISU",description:"GENISISU 로그인 페이지",openGraph:{title:"로그인 - GENISISU",description:"GENISISU 로그인 페이지입니다.",url:"/login",images:{url:"/images/genisisu_logo_b.png"}}}}function l(){return s.jsx("main",{className:"min-w-80 flex-grow flex items-center justify-center bg-white",children:(0,s.jsxs)("div",{className:"p-8 border border-gray-200 rounded-lg w-full max-w-md my-[50px]",children:[s.jsx("div",{className:"text-center py-4",children:s.jsx("h2",{className:"text-2xl font-semibold text-gray-700 dark:text-gray-200 max-[1366px]:text-[34px]",children:"로그인"})}),s.jsx(o,{})]})})}},3656:(e,t,r)=>{"use strict";r.d(t,{auth:()=>g,signIn:()=>u});var s=r(73978),a=r(52909),n=r(3760),i=r(11250),c=r(30507),o=r(57817),d=r.n(o),l=r(57640);let{handlers:f,signIn:u,signOut:b,auth:g,unstable_update:p}=(0,s.default)({trustHost:!0,providers:[(0,a.default)({credentials:{email:{},password:{}},async authorize(e){let t=await (0,c.login)(e);if(t.ok){let e=t.item;return{id:String(e._id),name:e.name,email:e.email,type:e.type,image:e.image&&"https://api.fesp.shop"+e.image,accessToken:e.token.accessToken,refreshToken:e.token.refreshToken}}throw new s.CredentialsSignin(t.message,{cause:t})}}),(0,n.default)({clientId:process.env.GITHUB_CLIENT_ID,clientSecret:process.env.GITHUB_CLIENT_SECRET}),(0,i.default)({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET}),(0,n.default)({clientId:process.env.GITHUB_CLIENT_ID,clientSecret:process.env.GITHUB_CLIENT_SECRET})],session:{strategy:"jwt",maxAge:86400},pages:{signIn:"/login"},callbacks:{async signIn({user:e,account:t,profile:r,credentials:s}){switch(console.log("callbacks.signIn",e,t,r,s),t?.provider){case"credentials":console.log("id/pwd 로그인",e);break;case"github":case"google":case"kakao":case"naver":case"genesis":console.log("OAuth 로그인",e);let a=null;try{let s={type:"user",loginType:t.provider,name:e.name||"",email:e.email||"",image:e.image||"",extra:{...r,providerAccountId:t.providerAccountId}},n=await (0,c.signupWithOAuth)(s);console.log("회원가입",n);let i=await (0,c.loginOAuth)(t.providerAccountId);if(i.ok)a=i.item,console.log(a);else throw Error(i.message)}catch(e){throw console.error(e),e}e.id=String(a?._id),e.type=a?.type,e.accessToken=a.token.accessToken,e.refreshToken=a.token.refreshToken}return!0},async jwt({token:e,user:t,trigger:r,session:s,account:a,profile:n}){console.log("jwt.user",t),t&&(e.id=t.id,e.type=t.type,e.accessToken=t.accessToken,e.refreshToken=t.refreshToken);let i=d().decode(e.accessToken),c=i?.exp?1e3*i.exp:0;if(Date.now()>c)try{console.log("토큰 만료됨.",Date.now()+" > "+c);let t=await (0,l.fetchAccessToken)(e.refreshToken);if(t.ok){let r=await t.json();return{...e,accessToken:r.accessToken}}401===t.status&&console.log("리플래시 토큰 인증 실패. 로그인 페이지로 이동해야 함",await t.json())}catch(t){if(t instanceof Error)return console.error(t),{...e,error:t.message}}return"update"===r&&s&&(e.name=s.name),e},session:async({session:e,token:t})=>(console.log("session.user",e.user),e.user.id=t.id,e.user.type=t.type,e.accessToken=t.accessToken,e.refreshToken=t.refreshToken,e)}})},30507:(e,t,r)=>{"use strict";r.r(t),r.d(t,{login:()=>l,loginOAuth:()=>u,signInWithCredentials:()=>d,signInWithGenesis:()=>g,signInWithGithub:()=>m,signInWithGoogle:()=>b,signInWithNaver:()=>p,signup:()=>o,signupWithOAuth:()=>f});var s=r(27745);r(26461);var a=r(3656),n=r(74739),i=r(85723);let c="https://api.fesp.shop";async function o(e){let t={type:e.get("type")||"user",name:e.get("name"),email:e.get("email"),password:e.get("password"),image:""},r=e.get("attach");if(r?.size>0){let r=await fetch(`${c}/files`,{method:"POST",headers:{"client-id":"02-genisisu"},body:e});if(!r.ok)throw Error("파일 업로드 실패");let s=await r.json();t.image=s.item[0].path}let s=await fetch(`${c}/users`,{method:"POST",headers:{"client-id":"02-genisisu","Content-Type":"application/json"},body:JSON.stringify(t)}),a=await s.json();return console.log("SignUp data",a),a}async function d(e){console.log("signInWithCredentials 로그인 결과",e);try{let t=await (0,a.signIn)("credentials",{...e,redirect:!1});console.log(t)}catch(e){if(console.error(e),e instanceof Error)return e.cause}(0,n.redirect)("/")}async function l(e){return(await fetch(`${c}/users/login`,{method:"POST",headers:{"Content-Type":"application/json","client-Id":"02-genisisu"},body:JSON.stringify(e)})).json()}async function f(e){return(await fetch(`${c}/users/signup/oauth`,{method:"POST",headers:{"client-id":"02-genisisu","Content-Type":"application/json"},body:JSON.stringify(e)})).json()}async function u(e){return(await fetch(`${c}/users/login/with`,{method:"POST",headers:{"client-id":"02-genisisu","Content-type":"application/json"},body:JSON.stringify({providerAccountId:e})})).json()}async function b(e){await (0,a.signIn)("google",{redirectTo:`/?email=${e.get("email")}`})}async function g(e){await (0,a.signIn)("genesis",{redirectTo:`/?email=${e.get("email")}`})}async function p(e){await (0,a.signIn)("naver",{redirectTo:`/?email=${e.get("email")}`})}async function m(e){await (0,a.signIn)("github",{redirectTo:`/?email=${e.get("email")}`})}(0,i.ensureServerEntryExports)([o,d,l,f,u,b,g,p,m]),(0,s.registerServerReference)("5c44382dbe96394bcad8fe4b0f12b83f462d1e68",o),(0,s.registerServerReference)("ca7d82acada03f15ffd04c3924204fbe18c8971d",d),(0,s.registerServerReference)("16d2bc6b5eced6961bf8db2bc1d67ede835e8f9d",l),(0,s.registerServerReference)("c0cb573e3032ccc05d1a3b82a51300969d69f854",f),(0,s.registerServerReference)("306b7454d444850388b0b337696bf2510e964603",u),(0,s.registerServerReference)("da3b8ea7950fbfe472d7320d9f1873de15c51e56",b),(0,s.registerServerReference)("9297a7c3c0a4c31a957e07bc1b2e216c94cd2f42",g),(0,s.registerServerReference)("7df7509f7707302aaf9117bcd8701335afe68ff3",p),(0,s.registerServerReference)("63123677dbadd7e687f735627efb79a41c8f7191",m)},1890:(e,t,r)=>{"use strict";r.r(t),r.d(t,{callGenesisLogin:()=>n});var s=r(27745);r(26461);var a=r(74739);async function n(){let e=new URLSearchParams;e.set("client_id","f7b3c2e0-1e7d-413b-8cfc-7faf2ccc7a90"),e.set("host","http://192.168.6.108:3000"),e.set("state","200");let t=`/api/proxy?${e.toString()}`;(0,a.redirect)(t)}(0,r(85723).ensureServerEntryExports)([n]),(0,s.registerServerReference)("b528dacb544d7652e5a942fe0e3cf294479c5318",n)},57640:(e,t,r)=>{"use strict";async function s(e){return await fetch("https://api.fesp.shop/auth/refresh",{headers:{"client-id":"02-genisisu",Authorization:`Bearer ${e}`}})}r.d(t,{fetchAccessToken:()=>s})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,73,783,519,41],()=>r(13527));module.exports=s})();